<?xml version="1.0" encoding="UTF-8"?>

<!-- ////////////////////////////////////////////////////////////////////// -->
<!-- Copyright (c) 2006 by Naohide Sano, All rights reserved.               -->
<!--                                                                        -->
<!-- Written by Naohide Sano                                                -->
<!--                                                                        -->
<!-- nsf                                                                    -->
<!--                                                                        -->
<!-- @author	Naohide Sano                                                -->
<!-- @version	0.00	060910	nsano	initial version                     -->
<!--                                                                        -->
<!-- ////////////////////////////////////////////////////////////////////// -->

<project name="nsf" default="compile" basedir=".">

  <!-- プロパティの定義 -->
  <property file="local.properties" />

  <property name="dir.src" value="src" />
  <property name="dir.build" value="build" />

  <!-- クラスパスの定義 -->
  <path id="project.class.path">
<!--
    <fileset dir="lib">
      <include name="*.jar" />
    </fileset>
-->
  </path>

  <!-- ターゲットの定義 -->

  <!-- clean -->
  <target name="clean" description="ビルド環境のクリア">
    <fileset dir="${dir.build}" failonerror="false">
      <include name="**/*" />
    </fileset>
    <fileset dir="target/test-classes" failonerror="false">
      <include name="**/*" />
    </fileset>
  </target>

  <!-- prepare -->
  <target name="prepare" description="ビルド環境の準備">
    <mkdir dir="${dir.build}" />
  </target>

  <!-- javac -->
  <target name="compile" depends="prepare" description="コンパイル">
    <javac debug="on" destdir="${dir.build}" deprecation="true">
      <classpath refid="project.class.path" />
      <include name="**/*.java" />
      <src path="${dir.src}" />
    </javac>
  </target>

  <!-- run -->
  <target name="run" depends="compile" description="プログラムの実行">
    <java classname="vavi.sound.nsf.Nsf" fork="yes">
      <classpath>
        <path refid="project.class.path" />
        <pathelement location="build" />
      </classpath>
      <arg value="${nsf.in.file}" />
    </java>
  </target>

  <!-- findbugs -->
  <target name="findbugs" depends="compile">
    <taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask"/>
    <findbugs home="${findbugs.home}"
              output="text"
              outputFile="tmp/findbugs.txt" >
      <auxClasspath refid="project.class.path" />
      <sourcePath path="src/java" />
      <class location="${dir.build}" />
    </findbugs>
  </target>

</project>

<!-- -->
